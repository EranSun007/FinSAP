<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAP BTP Cockpit - Overview</title>
    <!-- SAP Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- External CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/harvesting.css">
</head>

<body>

    <!-- Header -->
    <header class="shell-header">
        <div class="header-left">
            <img src="SAP_R_grad_scrn.svg" alt="SAP" class="sap-logo">
            <div class="header-title">
                <span>Home</span> <span>‚ñº</span>
            </div>
        </div>
        <div class="header-center">
            <!-- Search Bar -->
            <div class="search-bar">
                <span>Search</span>
                <span>üîç</span>
            </div>
        </div>
        <div class="header-right">
            <div class="header-icon">‚ùì</div>
            <div class="header-icon">üîî</div>
            <div class="user-avatar">JD</div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-bar">
        <a href="#" class="nav-item active" onclick="switchView('view-overview'); return false;">Overview</a>

        <div class="nav-item dropdown">
            <span>SaaS Subscriptions ‚ñº</span>
            <div class="dropdown-content">
                <a href="#" onclick="switchView('view-sam'); return false;">Service and Asset Manager</a>
                <a href="#" onclick="switchView('view-papm'); return false;">Profit and performance management</a>
                <a href="#" onclick="switchView('view-signavio'); return false;">Signavio</a>
                <a href="#" onclick="switchView('view-sac'); return false;">SAP Analytics Cloud</a>
                <a href="#" onclick="switchView('view-harvesting'); return false;">Harvesting</a>
            </div>
        </div>

        <div class="nav-item dropdown">
            <span>Billing Verification ‚ñº</span>
            <div class="dropdown-content">
                <a href="#">Invoices</a>
                <a href="#">Payment History</a>
            </div>
        </div>

        <div class="nav-item dropdown">
            <span>Cost Breakdown ‚ñº</span>
            <div class="dropdown-content">
                <a href="#">By Service</a>
                <a href="#">By Region</a>
                <a href="#">By Cost Center</a>
            </div>
        </div>

        <div class="nav-item dropdown">
            <span>Credit Expenditure ‚ñº</span>
            <div class="dropdown-content">
                <a href="#">Usage History</a>
                <a href="#">Forecast</a>
            </div>
        </div>

        <div class="nav-item dropdown">
            <span>Cross Charging ‚ñº</span>
            <div class="dropdown-content">
                <a href="#">Internal Billing</a>
                <a href="#">Reports</a>
            </div>
        </div>

        <a href="#" class="nav-item">Monitoring & Alerting</a>
        <a href="#" class="nav-item">Cost Optimization</a>
        <a href="#" class="nav-item">Joule</a>
    </nav>

    <!-- Main Content Container -->
    <div class="main-container">

        <!-- VIEW: OVERVIEW (Default) -->
        <div id="view-overview" class="view-section">

            <!-- Top Grid: Highest Credit Forecasts & Tile Grid -->
            <div class="dashboard-grid">

                <!-- Left: Highest Credit Forecasts Table -->
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">Highest Credit Forecasts (Top 5)</div>
                            <div class="card-subtitle">Global Account</div>
                        </div>
                        <div style="color: var(--sap-blue); font-size: 0.8rem; cursor: pointer;">View All</div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Service / Metric</th>
                                    <th style="text-align: right;">Cost</th>
                                    <th style="text-align: right;">Increase</th>
                                    <th style="text-align: right;">Forecast</th>
                                    <th>Forecast %</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Right: License Harvesting Opportunities Table -->
                <div class="harvesting-opportunities-card">
                    <div class="card-header">
                        <div>
                            <h3>License Harvesting Opportunities (Top 3)</h3>
                            <div class="card-subtitle">All License Types</div>
                        </div>
                        <a href="#" class="view-all-link" onclick="switchView('view-harvesting'); return false;">View
                            All</a>
                    </div>
                    <div class="harvesting-table-container">
                        <table class="harvesting-opportunities-table">
                            <thead>
                                <tr>
                                    <th>License Type</th>
                                    <th>Inactive Users</th>
                                    <th>No Log-On Users</th>
                                    <th>Total Harvestable</th>
                                    <th>Est. Monthly Savings</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="harvesting-opportunities-tbody">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>


            </div>

            <!-- Bottom Grid: Forecast Breakdown & Cost Chart -->
            <div class="bottom-grid">

                <!-- Forecast Breakdown (Donut) -->
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">Forecast Breakdown</div>
                            <div class="card-subtitle">By Directory</div>
                        </div>
                    </div>
                    <div style="height: 250px; position: relative;">
                        <canvas id="donutChart"></canvas>
                    </div>
                </div>

                <!-- Cost and Forecast (Bar/Line) -->
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">Cost and Forecast</div>
                            <div class="card-subtitle">BTP EA + Business AI</div>
                            <div class="chart-header-sub">
                                <span>Actual: <strong>19,850.00 EUR</strong></span>
                                <span>Forecast: <strong>24,320.00 EUR</strong></span>
                            </div>
                        </div>
                        <div class="chart-header-value">24.3k</div>
                    </div>
                    <div style="height: 250px;">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>

            </div>

        </div> <!-- End View Overview -->

        <!-- VIEW: Service and Asset Manager -->
        <div id="view-sam" class="view-section" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Service and Asset Manager</div>
                </div>
                <div style="padding: 2rem; text-align: center; color: var(--sap-text-light);">
                    <h2>Service and Asset Manager Dashboard</h2>
                    <p>Specific metrics and controls for SAM will appear here.</p>
                </div>
            </div>
        </div>

        <!-- VIEW: Profit and Performance Management -->
        <div id="view-papm" class="view-section" style="display: none;">
            <div class="papm-container">
                <!-- Header -->
                <div class="papm-header">
                    <h1>üìä SAP Profitability and Performance Management Cloud</h1>
                    <p>October 2025 - Interactive visualization showing correlation between infrastructure and
                        application metrics</p>
                </div>

                <!-- Dashboard Layout -->
                <div class="papm-dashboard-layout">
                    <!-- Sidebar: Controls -->
                    <div class="papm-sidebar">
                        <div class="papm-controls">
                            <div class="controls-header">
                                <h3>Metric Controls</h3>
                                <div class="scale-control">
                                    <label>Y-Axis Scale:</label>
                                    <select id="papm-scale-select">
                                        <option value="auto">Auto Scale</option>
                                        <option value="fit">Fit to Visible</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Category Toggles -->
                            <div class="category-toggles" id="papm-category-toggles">
                                <!-- Populated by JS -->
                            </div>

                            <!-- Individual Metric Toggles -->
                            <div class="metric-grid" id="papm-metric-toggles">
                                <!-- Populated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Main Content: Chart, Insights, Formula -->
                    <div class="papm-main-content">
                        <!-- Chart -->
                        <div class="papm-chart-container">
                            <canvas id="papmChart"></canvas>
                        </div>

                        <!-- Key Insights -->
                        <div class="papm-insights">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <h3 style="margin: 0; color: #2c3e50;">üîç Key Observations</h3>
                                <select id="papm-insights-period"
                                    style="padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd; font-size: 13px; color: #2c3e50;">
                                    <option value="last-month">Last Month</option>
                                    <option value="last-3-months">Last 3 Months</option>
                                    <option value="last-6-months">Last 6 Months</option>
                                    <option value="last-year">Last Year</option>
                                </select>
                            </div>
                            <div class="insights-grid" id="papm-insights-grid">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Formula Box -->
                        <div class="papm-formula">
                            <h3 style="margin: 0 0 12px 0;">üìê The Correlation Formula</h3>
                            <div class="formula-code">
                                <div><strong>PaPM: total_peak_memory</strong> = hana_storage_memory_gb_sm +
                                    hana_peak_calculation_memory_gb_sm</div>
                                <div
                                    style="margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.2);">
                                    <strong>Oct 25: 949.10 GB</strong> = 76.89 GB (storage) + 872.35 GB (calculation)
                                </div>
                            </div>

                            <h4 style="margin: 12px 0 8px 0; font-size: 14px;">üç∫ Brandon's Brewery Model - PaPM Use
                                Case Types (L/P/F):</h4>
                            <div class="formula-section">
                                <div style="margin-bottom: 6px;"><strong>L (LIFD Model):</strong> Base sizing 0.357
                                    GB/unit - Most stable, baseline calculation model</div>
                                <div style="margin-bottom: 6px;"><strong>P (PSA Model):</strong> Base sizing 0.579
                                    GB/unit - Persistent Staging Area, moderate growth</div>
                                <div><strong>F (Profitability Model):</strong> Base sizing 0.859 GB/unit - Full
                                    profitability calculations, highest volatility</div>
                            </div>
                            <div style="margin-top: 12px; font-size: 12px; font-style: italic; opacity: 0.9;">
                                üí° These three "taps" in the brewery represent different PaPM use case configurations,
                                each with distinct memory footprints. Together they contribute to the total storage
                                memory.
                            </div>

                            <h4 style="margin: 16px 0 8px 0; font-size: 14px;">üî¨ HANA Cockpit Validation Queries:</h4>
                            <div class="formula-section">
                                <div style="margin-bottom: 8px;"><strong>1. Column Store:</strong> SELECT
                                    SUM(USED_MEMORY_SIZE)/1024/1024/1024 FROM M_SERVICE_COMPONENT_MEMORY WHERE
                                    COMPONENT='Column Store'</div>
                                <div style="margin-bottom: 8px;"><strong>2. PaPM Tables:</strong> SELECT
                                    SUM(MEMORY_SIZE_IN_TOTAL)/1024/1024/1024 FROM M_CS_TABLES WHERE SCHEMA_NAME LIKE
                                    'SAP_PAPM_%'</div>
                                <div><strong>3. Heap Memory:</strong> SELECT SUM(USED_SIZE)/1024/1024/1024 FROM
                                    M_HEAP_MEMORY</div>
                            </div>
                            <div style="margin-top: 12px; font-size: 13px; font-style: italic; opacity: 0.9;">
                                üí° These real-time queries would be executed during calculation to capture peak values
                                that correlate with PaPM's reported metrics.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: Signavio -->
        <div id="view-signavio" class="view-section" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Signavio</div>
                </div>
                <div style="padding: 2rem; text-align: center; color: var(--sap-text-light);">
                    <h2>Signavio Process Transformation</h2>
                    <p>Process analysis and mining views.</p>
                </div>
            </div>
        </div>

        <!-- VIEW: SAP Analytics Cloud -->
        <div id="view-sac" class="view-section" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">SAP Analytics Cloud</div>
                </div>
                <div style="padding: 2rem; text-align: center; color: var(--sap-text-light);">
                    <h2>SAC Dashboard</h2>
                    <p>Embedded analytics and stories.</p>
                </div>
            </div>
        </div>

        <!-- VIEW: HARVESTING -->
        <div id="view-harvesting" class="view-section" style="display: none;">
            <div class="harvesting-container">
                <!-- Header -->
                <div class="harvesting-header">
                    <div class="header-title-row">
                        <span class="expand-icon">‚åÑ</span>
                        <select id="license-type-selector" class="license-dropdown">
                            <option value="signavio">Signavio Licenses</option>
                            <option value="sac" selected>SAP Analytics Cloud Licenses</option>
                            <option value="business-ai">Business AI - HCM package Licenses</option>
                        </select>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn" id="btn-add-tag" disabled>Add Tag</button>
                        <button class="action-btn primary" id="btn-harvest" disabled>Harvest</button>
                        <span class="expand-icon">‚§¢</span>
                    </div>
                </div>

                <div class="harvesting-content">
                    <!-- Sidebar -->
                    <div class="harvesting-sidebar">
                        <div class="sidebar-item active">All</div>
                        <div class="sidebar-item">Planning Professional</div>
                        <div class="sidebar-item">Planning Standard</div>
                        <div class="sidebar-item">Business Intelligence</div>
                    </div>

                    <!-- Main Content -->
                    <div class="harvesting-main">
                        <!-- Inactive User Table -->
                        <div class="harvesting-table-section">
                            <h3>Inactive User</h3>
                            <div class="table-scroll-container">
                                <table class="harvesting-table" id="inactive-users-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px;"><input type="checkbox" id="select-all-inactive">
                                            </th>
                                            <th>Last Activity Timestamp</th>
                                            <th>User</th>
                                            <th>Email</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Populated by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- No Log-On User Table -->
                        <div class="harvesting-table-section">
                            <h3>No Log-On User</h3>
                            <div class="table-scroll-container">
                                <table class="harvesting-table" id="no-logon-users-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px;"><input type="checkbox" id="select-all-nologon">
                                            </th>
                                            <th>User</th>
                                            <th>Email</th>
                                            <th>License</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Populated by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>

    <!-- External JS -->
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>

</body>

</html>